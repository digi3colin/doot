package doot{	import com.fastframework.core.FASTEventDispatcher;	import com.fastframework.net.ILoader;	import com.fastframework.net.LoaderEvent;	import com.fastframework.net.LoaderFactory;	import flash.events.Event;	/**	 * @author colin	 */	public class I18n extends FASTEventDispatcher{		private static var ins : I18n;		public static const EVENT_READY : String = "EVENT_READY";		private var strLoader:ILoader;		private var isLoading:Boolean = false;		private var xTranslate:XML;		public static function instance():I18n{			return ins|| new I18n();		}		public function I18n(){			if(ins!=null)return;			ins = this;			strLoader = LoaderFactory.instance().getXMLLoader();			strLoader.once(LoaderEvent.READY, translateLoaded);		}		private function translateLoaded(e:Event):void{			xTranslate = strLoader.getContext();			dispatchEvent(new Event(I18n.EVENT_READY));		}		public function load():void{			if(xTranslate!=null)dispatchEvent(new Event(I18n.EVENT_READY));			if(isLoading==true)return;			isLoading = true;			strLoader.load(ResolveLink.instance().create('translate.xml'));					}		public function t(key:String):String{			if(xTranslate==null)return '';			var tString:String = xTranslate.child(key).toString();			return (tString=='')?key:tString;		}		public function html(key:String,size:int=12,color:String="#000000",font:String="FontBody"):String{			return '<font face="'+font+'" size="'+size+'" color="'+color+'">'+t(key)+'</font>';		}		public static function html(key:String,size:int=12,color:String="#000000",font:String="FontBody"):String{			return I18n.instance().html(key, size, color, font);		}		public static function t(key:String):String{			return I18n.instance().t(key);		}	}}